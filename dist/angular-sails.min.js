(function(e,t){"use strict";var n=e.module("ngSails",[]);n.provider("$sails",function(){var n=this;this.url=undefined;this.interceptors=[];this.$get=["$q","$timeout",function(r,i){var s=t.connect(n.url),o=function(){var e=r.defer(),t=e.promise;t.success=function(e){t.then(function(t){e(t)});return t};t.error=function(e){t.then(null,function(t){e(t)});return t};return e},u=function(t,n){if(n&&e.isObject(n)&&n.status&&Math.floor(n.status/100)!==2){t.reject(n)}else{t.resolve(n)}},a=function(e,t){i(function(){e(t)})};s.legacy_get=s.get;s.legacy_post=s.post;s.legacy_put=s.put;s.legacy_delete=s["delete"];s.legacy_on=s.on;s.legacy_once=s.once;s.get=function(t,n,r){var i=o();if(r===undefined&&e.isFunction(n)){r=n;n=null}i.promise.then(r);s.legacy_get(t,n,function(e){u(i,e)});return i.promise};s.post=function(t,n,r){var i=o();if(r===undefined&&e.isFunction(n)){r=n;n=null}i.promise.then(r);s.legacy_post(t,n,function(e){u(i,e)});return i.promise};s.put=function(t,n,r){var i=o();if(r===undefined&&e.isFunction(n)){r=n;n=null}i.promise.then(r);s.legacy_put(t,n,function(e){u(i,e)});return i.promise};s["delete"]=function(t,n,r){var i=o();if(r===undefined&&e.isFunction(n)){r=n;n=null}i.promise.then(r);s.legacy_delete(t,n,function(e){u(i,e)});return i.promise};s.on=function(t,n){if(n!==undefined&&e.isFunction(n)){s.legacy_on(t,function(e){a(n,e)})}};s.once=function(t,n){if(n!==undefined&&e.isFunction(n)){s.legacy_once(t,function(e){a(n,e)})}};return s}]})})(angular,io)