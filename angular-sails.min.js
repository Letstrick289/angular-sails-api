(function(e,t){"use strict";var n=e.module("ngSails",[]);n.service("$sails",["$q",function(n){function o(){var e=n.defer(),t=e.promise;t.success=function(e){t.then(function(t){e(t)});return t};t.error=function(e){t.then(null,function(t){e(t)});return t};return e}function u(t,n){if(n&&e.isObject(n)&&n.status&&~~(n.status/100)!==2){t.reject(n)}else{t.resolve(n)}}var r=t.connect(),i=false,s=null;r.on("connect",function(){i=true;if(e.isFunction(s)){s();s=null}});r.on("disconnect",function(){i=false});return{reconnect:function(e,t){var n=function(){r.disconnect();if(r.socket!==undefined){r.socket.connect(e,t)}};if(i===true){n()}else{s=n}},disconnect:function(){r.disconnect()},emit:function(e,t){r.emit(e,t)},on:function(e,t){var n=o();n.promise.then(t);r.on(e,function(e){u(n,e)});return n.promise},get:function(t,n,i){var s=o();if(i===undefined&&e.isFunction(n)){i=n;n=null}s.promise.then(i);r.get(t,n,function(e){u(s,e)});return s.promise},post:function(t,n,i){var s=o();if(i===undefined&&e.isFunction(n)){i=n;n=null}s.promise.then(i);r.post(t,n,function(e){u(s,e)});return s.promise},put:function(t,n,i){var s=o();if(i===undefined&&e.isFunction(n)){i=n;n=null}s.promise.then(i);r.put(t,n,function(e){u(s,e)});return s.promise},"delete":function(t,n,i){var s=o();if(i===undefined&&e.isFunction(n)){i=n;n=null}s.promise.then(i);r["delete"](t,n,function(e){u(s,e)});return s.promise}}}])})(angular,io)
